# ========================================
# TechFactory Configuration
# ========================================
# This file allows server admins to customize game balance and performance
# without modifying code or recompiling the plugin.
#
# After making changes, use /techfactory reload to apply them instantly!
# No server restart required.
#
# All time values:
#   - Ticks: 20 ticks = 1 second
#   - Milliseconds (ms): 1000ms = 1 second
#
# ========================================

# ========================================
# SMELTING SYSTEM
# ========================================
smelting:
  # How long each smelt operation takes (in milliseconds)
  # Default: 1300ms (1.3 seconds)
  # Lower = faster smelting, higher = slower smelting
  duration_ms: 1300
  
  # How often to check for completed smelting operations (in ticks)
  # Default: 5 ticks (4 times per second)
  # Lower = more responsive but more CPU usage
  check_interval_ticks: 5
  
  # How often to save smelter inventories to database (in milliseconds)
  # Default: 5000ms (5 seconds)
  # Batches saves to reduce database writes
  save_interval_ms: 5000
  
  # How often to check for dirty smelters (in ticks)
  # Default: 100 ticks (5 seconds)
  dirty_check_interval_ticks: 100
  
  # Maximum distance to send smelting completion messages (in blocks)
  # Default: 16 blocks
  # Only players within this distance receive notifications
  notification_distance: 16.0

# ========================================
# ENERGY SYSTEM
# ========================================
energy:
  # Maximum distance to render energy holograms (in blocks)
  # Default: 64 blocks
  # Only shows holograms within this distance of players
  # Prevents entity spam with many energy regulators
  hologram_render_distance: 64.0

  # How often to update energy networks and holograms (in ticks)
  # Default: 20 ticks (1 second)
  update_interval_ticks: 20

# ========================================
# ELECTRIC MACHINES
# ========================================
electric_machines:
  # How many ticks a machine can be idle before being removed from active set
  # Default: 20 ticks (1 second)
  # Lower = faster idle detection = less CPU waste on empty machines
  idle_threshold_ticks: 20

  # How often to process electric machines (in ticks)
  # Default: 2 ticks (10 times per second)
  # Lower frequency = less CPU usage for machine processing
  task_interval_ticks: 2

  # Maximum machines to process per tick (Slimefun-style queue-based processing)
  # Default: 100 machines per tick
  # HOW IT WORKS:
  #   - Instead of processing ALL machines every tick (1000 machines = LAG)
  #   - Process a SUBSET per tick using round-robin (100 machines = SMOOTH)
  #   - Each machine gets processed every N ticks instead of every tick
  # EXAMPLE with 1000 machines and max_per_tick=100:
  #   - Each machine processed every 10 ticks instead of every tick
  #   - 90% CPU reduction for large farms
  # SCALING:
  #   - 100 = handles 1000+ machines smoothly
  #   - 200 = handles 2000+ machines (if you have a beefy server)
  #   - 50 = more conservative (if you have lag issues)
  max_per_tick: 100

# ========================================
# RATE LIMITING & ANTI-SPAM
# ========================================
rate_limit:
  # Cooldown between multiblock interactions (in milliseconds)
  # Default: 500ms (0.5 seconds)
  # Prevents spam clicking on machines
  multiblock_cooldown_ms: 500
  
  # Cooldown between inventory clicks (in milliseconds)
  # Default: 50ms
  # Prevents inventory spam/duplication exploits
  inventory_cooldown_ms: 50
  
  # How often to cleanup old rate limiter entries (in ticks)
  # Default: 600 ticks (30 seconds)
  cleanup_interval_ticks: 600
  
  # Maximum age for rate limiter entries before cleanup (in milliseconds)
  # Default: 300000ms (5 minutes)
  max_age_ms: 300000
  
  # Maximum size of rate limiter cache before forced cleanup
  # Default: 10000 entries
  # Prevents memory leak with many players
  max_size: 10000

# ========================================
# PLAYER OPERATION LIMITS
# ========================================
player_limits:
  # Maximum multiblock crafts per second per player
  # Default: 5
  # Prevents automation/macro abuse
  max_multiblock_crafts_per_second: 5
  
  # Maximum smelting operations started per second per player
  # Default: 10
  # Prevents spam starting smelters
  max_smelting_starts_per_second: 10
  
  # Maximum inventory clicks per second per player
  # Default: 20
  # Prevents inventory spam/duplication exploits
  max_inventory_clicks_per_second: 20
  
  # Maximum block placements per second per player
  # Default: 10
  # Prevents WorldEdit-style spam
  max_block_places_per_second: 10
  
  # Maximum block breaks per second per player
  # Default: 10
  # Prevents nuker/fast-break exploits
  max_block_breaks_per_second: 10
  
  # Time window for rate limiting (in milliseconds)
  # Default: 1000ms (1 second)
  rate_limit_time_window_ms: 1000

# ========================================
# NOTIFICATION SYSTEM
# ========================================
notifications:
  # Minimum time between duplicate messages to same player (in milliseconds)
  # Default: 1000ms (1 second)
  # Prevents message spam when many smelters complete at once
  message_spam_cooldown_ms: 1000
  
  # Enable smelting completion messages
  # Default: true
  # Set to false to disable all smelting notifications
  enable_smelting_messages: true

# ========================================
# DATABASE & PERFORMANCE
# ========================================
database:
  # SQLite cache size (in KB)
  # Default: 65536 KB (64MB)
  # Higher = faster queries but more RAM usage
  sqlite_cache_size_kb: 65536
  
  # SQLite memory-mapped I/O size (in bytes)
  # Default: 268435456 bytes (256MB)
  # Higher = faster reads but more RAM usage
  sqlite_mmap_size_bytes: 268435456
  
  # How often to run auto-save task (in ticks)
  # Default: 6000 ticks (5 minutes)
  auto_save_interval_ticks: 6000

# ========================================
# SMELTER GUI LAYOUT
# ========================================
smelter_gui:
  # Smelter GUI size (in slots)
  # Default: 27 (3 rows)
  # WARNING: Changing this may break existing smelters!
  size: 27
  
  # Smelter output slot index
  # Default: 16 (right side of GUI)
  # WARNING: Changing this may break existing smelters!
  output_slot: 16

# ========================================
# VALIDATION & LIMITS
# ========================================
limits:
  # Maximum multiblock inventory size (in slots)
  # Default: 54 (6 rows)
  # Prevents oversized inventories from causing issues
  max_multiblock_inventory_size: 54
  
  # Maximum recipe complexity (number of unique items)
  # Default: 9
  # Prevents overly complex recipes from causing performance issues
  max_recipe_complexity: 9

# ========================================
# LOGGING & DEBUGGING
# ========================================
debug:
  # Whether to log chunk load events
  # Default: false
  # Set to true for debugging chunk loading issues
  log_chunk_loads: false
  
  # Whether to log rate limiter cleanups
  # Default: false
  # Set to true for debugging rate limiting issues
  log_rate_limiter_cleanup: false
  
  # Whether to log database operations
  # Default: false
  # Set to true for debugging database issues
  log_database_operations: false

